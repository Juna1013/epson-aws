<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>AWS Lambda テスト - AWS Assistant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
      .code-block {
        background: #1a1a1a;
        border-radius: 12px;
        overflow: hidden;
      }
      .loading {
        animation: pulse 2s infinite;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-900">
    <header class="bg-white border-b border-gray-200 sticky top-0 z-10">
      <div class="max-w-6xl mx-auto px-4 py-3">
        <div class="flex items-center space-x-3">
          <a href="index.html" class="text-gray-500 hover:text-gray-700">
            <i class="fas fa-arrow-left"></i>
          </a>
          <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
            <i class="fas fa-bolt text-purple-600 text-sm"></i>
          </div>
          <div>
            <h1 class="font-semibold text-gray-900">AWS Lambda</h1>
            <p class="text-xs text-gray-500">サーバーレスコンピューティング</p>
          </div>
        </div>
      </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-8">
      <div class="bg-white rounded-2xl shadow-sm border p-8 mb-8">
        <div class="flex items-center space-x-3 mb-6">
          <div class="w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center">
            <i class="fas fa-play text-purple-600"></i>
          </div>
          <div>
            <h2 class="text-xl font-bold text-gray-900">Lambda API 実行テスト</h2>
            <p class="text-gray-600 text-sm">サーバーレス関数の実際の動作を体験してみましょう</p>
          </div>
        </div>

        <div class="bg-gray-50 rounded-xl p-6 mb-6">
          <div class="flex flex-col sm:flex-row gap-4">
            <div class="flex-1">
              <label for="nameInput" class="block text-sm font-medium text-gray-700 mb-2">名前を入力</label>
              <input
                type="text"
                id="nameInput"
                placeholder="例: 太郎"
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
              />
            </div>
            <div class="flex items-end">
              <button
                onclick="callApi()"
                id="submitBtn"
                class="px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2 w-full sm:w-auto"
              >
                <i class="fas fa-rocket"></i>
                <span>Lambda実行</span>
              </button>
            </div>
          </div>
        </div>

        <div id="responseSection" class="hidden">
          <h3 class="font-medium text-gray-900 mb-3">実行結果</h3>
          <div class="bg-green-50 border border-green-200 rounded-lg p-4">
            <div class="flex items-start space-x-3">
              <div class="w-6 h-6 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-check text-green-600 text-xs"></i>
              </div>
              <div class="flex-1">
                <p id="response" class="text-green-800 font-medium"></p>
                <p class="text-green-600 text-sm mt-1">Lambda関数が正常に実行されました</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border p-8 mb-8">
        <h2 class="text-xl font-bold text-gray-900 mb-6">AWS Lambdaとは</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
          <div>
            <p class="text-gray-600 leading-relaxed mb-4">
              AWS Lambdaは、サーバーのプロビジョニングや管理を行うことなく、コードを実行できるコンピューティングサービスです。
              使用した分だけ料金を支払う従量制課金モデルを採用しています。
            </p>
            <ul class="space-y-2 text-gray-600">
              <li class="flex items-center space-x-2">
                <i class="fas fa-check text-green-600 text-sm"></i>
                <span>サーバー管理不要</span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-check text-green-600 text-sm"></i>
                <span>自動スケーリング</span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-check text-green-600 text-sm"></i>
                <span>従量制課金</span>
              </li>
              <li class="flex items-center space-x-2">
                <i class="fas fa-check text-green-600 text-sm"></i>
                <span>イベント駆動型実行</span>
              </li>
            </ul>
          </div>
          <div class="bg-gray-50 rounded-lg p-4">
            <h3 class="font-medium text-gray-900 mb-3">サポート言語</h3>
            <div class="grid grid-cols-2 gap-3 text-sm">
              <div class="flex items-center space-x-2">
                <i class="fab fa-node-js text-green-600"></i>
                <span>Node.js</span>
              </div>
              <div class="flex items-center space-x-2">
                <i class="fab fa-python text-blue-600"></i>
                <span>Python</span>
              </div>
              <div class="flex items-center space-x-2">
                <i class="fab fa-java text-red-600"></i>
                <span>Java</span>
              </div>
              <div class="flex items-center space-x-2">
                <i class="fas fa-hashtag text-purple-600"></i>
                <span>C#</span>
              </div>
              <div class="flex items-center space-x-2">
                <i class="fab fa-golang text-cyan-600"></i>
                <span>Go</span>
              </div>
              <div class="flex items-center space-x-2">
                <i class="fas fa-gem text-red-500"></i>
                <span>Ruby</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border p-8 mb-8">
        <h2 class="text-xl font-bold text-gray-900 mb-6">サンプルコード</h2>
        <div class="code-block">
          <div class="bg-gray-800 px-4 py-2 flex items-center justify-between">
            <div class="flex items-center space-x-2">
              <i class="fab fa-js-square text-yellow-400"></i>
              <span class="text-gray-300 text-sm">Lambda Function (Node.js)</span>
            </div>
            <button onclick="copyCode()" class="text-gray-400 hover:text-gray-300">
              <i class="fas fa-copy"></i>
            </button>
          </div>
          <pre class="p-4 text-sm text-gray-300 overflow-x-auto"><code id="sampleCode">exports.handler = async (event) => {
    // APIGatewayからのクエリパラメータを取得
    const name = event.queryStringParameters?.name || 'Guest';
    
    // レスポンス作成
    const response = {
        statusCode: 200,
        headers: {
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*'
        },
        body: JSON.stringify({
            message: `こんにちは、${name}さん！Lambda関数が正常に実行されました。`,
            timestamp: new Date().toISOString(),
            requestId: event.requestContext?.requestId
        })
    };
    
    return response;
};</code></pre>
        </div>
      </div>

      <div class="bg-white rounded-2xl shadow-sm border p-8 mb-8">
        <h2 class="text-xl font-bold text-gray-900 mb-6">使用事例</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div class="border border-gray-200 rounded-lg p-4">
            <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mb-3">
              <i class="fas fa-api text-blue-600"></i>
            </div>
            <h3 class="font-medium text-gray-900 mb-2">API バックエンド</h3>
            <p class="text-gray-600 text-sm">REST APIのバックエンド処理をサーバーレスで実装</p>
          </div>

          <div class="border border-gray-200 rounded-lg p-4">
            <div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center mb-3">
              <i class="fas fa-database text-green-600"></i>
            </div>
            <h3 class="font-medium text-gray-900 mb-2">データ処理</h3>
            <p class="text-gray-600 text-sm">ファイルアップロード時の自動データ変換・加工</p>
          </div>

          <div class="border border-gray-200 rounded-lg p-4">
            <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mb-3">
              <i class="fas fa-clock text-purple-600"></i>
            </div>
            <h3 class="font-medium text-gray-900 mb-2">定期実行</h3>
            <p class="text-gray-600 text-sm">CloudWatch Eventsと連携したバッチ処理</p>
          </div>

          <div class="border border-gray-200 rounded-lg p-4">
            <div class="w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center mb-3">
              <i class="fas fa-bell text-orange-600"></i>